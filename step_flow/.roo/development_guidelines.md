# Гайдлайны по разработке для проекта "Step Flow"

Этот документ содержит специфичные гайдлайны по разработке для проекта "Step Flow", дополняющие глобальные гайдлайны из [`../../.roo/development_guidelines.md`](../../.roo/development_guidelines.md).

## Общие принципы
*   Всегда ссылайтесь на основной план проекта: [`../step_flow_project_plan.md`](../step_flow_project_plan.md).
*   Соблюдайте предложенную структуру директорий (см. раздел 6 плана проекта).
*   Используйте предложенный стек технологий (см. раздел 2 плана проекта).

## Гайдлайны для React Native (PWA/Mobile - [`../frontend_pwa/`](../frontend_pwa/))
*   **Стиль кода**: Следуйте основным принципам JavaScript/TypeScript, используйте Prettier и ESLint с конфигурациями, адаптированными для React Native.
*   **Работа с нативными модулями**:
    *   По возможности используйте кросс-платформенные библиотеки.
    *   При необходимости написания нативного кода, четко разделяйте логику для iOS и Android.
    *   Тщательно документируйте использование нативных модулей.
*   **Управление состоянием**: Выберите одно из решений (Redux Toolkit, Zustand, Recoil) и придерживайтесь его во всем PWA-приложении.
*   **Стилизация**: Адаптируйте Tailwind CSS или используйте Styled Components для неоморфного дизайна. Обеспечьте консистентность стилей.
*   **Тестирование**: Пишите unit-тесты (Jest) и интеграционные тесты (React Native Testing Library) для всех компонентов и ключевых функций.

## Гайдлайны для FastAPI (Backend - [`../backend/`](../backend/))
*   **Структура проекта**:
    *   Разделяйте логику по модулям/доменам (например, `users`, `workflows`, `agents`).
    *   Используйте `routers` для определения эндпоинтов.
    *   Модели Pydantic должны находиться в отдельном модуле `schemas` или рядом с соответствующими роутерами/сервисами.
*   **Работа с Pydantic моделями**:
    *   Четко определяйте модели для запросов и ответов API.
    *   Используйте валидацию Pydantic для обеспечения корректности данных.
*   **Асинхронное программирование**:
    *   Используйте `async/await` для всех I/O операций (работа с БД, внешние API).
    *   Избегайте блокирующих вызовов.
*   **Работа с базой данных (SQLAlchemy/AsyncPG)**:
    *   Используйте асинхронные сессии и движки.
    *   Определяйте модели SQLAlchemy в модуле `models`.
    *   Для сложных запросов используйте Core SQLAlchemy или чистый SQL, если это оправдано.
*   **Тестирование**: Пишите unit-тесты (Pytest) для сервисов, репозиториев и API эндпоинтов. Используйте моки для внешних зависимостей.

## Правила именования компонентов в неоморфном UI
*   **Общий префикс**: Можно использовать префикс `Neumo` или `Nm` для компонентов в неоморфном стиле (например, `NeumoButton`, `NmCard`).
*   **Ясность и консистентность**: Имена должны четко отражать назначение компонента.
*   **Структура**: Если компонент составной, отражайте это в названии (например, `NeumoListItem`, `NeumoListItemContent`).
*   **Состояния**: Для стилизации различных состояний (нажатие, фокус) используйте понятные CSS классы или пропсы в Styled Components.

## Документация
*   Все функции, классы и модули должны иметь docstrings.
*   Для API эндпоинтов используйте возможности FastAPI для автоматической генерации документации (OpenAPI).
*   Сложная логика должна быть прокомментирована.

## Взаимодействие с другими агентами
*   Четко следуйте инструкциям от `SF_Architect` и `SF_LeadDeveloper`.
*   Оперативно реагируйте на запросы от `SF_QA` и исправляйте найденные баги.
*   При необходимости изменений в API, согласовывайте их с разработчиками фронтенда и другими потребителями API.